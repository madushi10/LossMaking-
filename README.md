# LossMaking-
Data Retrieval:

It imports various libraries such as requests, json, numpy, pandas, and others.
The script fetches data from a specific API by making HTTP requests, including logging into a website using a POST request to obtain a JSON Web Token (JWT) for authentication.
Data Manipulation:

It processes the data obtained from the API by converting it into a Pandas DataFrame.
There's a function calculate_discounted_sales defined to calculate discounted sales based on customer conditions.
The script calculates the profit margin for each row in the DataFrame and applies specific rules when the cost amount is zero.
It filters the DataFrame to include only rows where the profit margin is less than 5%.
Certain columns are removed from the DataFrame to clean the data.
Data Analysis and Reporting:

The script extracts data for the previous day and stores it in a variable.
It prepares an email with a report containing the extracted data for profit margins less than 5% and attaches the data as an Excel file.
Email Sending:

The script uses the smtplib library to send an email with the report as an attachment.
Email parameters such as sender, receivers, subject, and body are defined.
The email body is generated by including the data in the email body.
Email Attachment:

The script attaches the Excel file containing the data to the email.
Email Sending:

The script establishes an SMTP connection (in this case, for Gmail) and logs in using the sender's credentials (you should use a secure method like an App Password or environment variables for better security).
The email is sent to the specified recipients.
